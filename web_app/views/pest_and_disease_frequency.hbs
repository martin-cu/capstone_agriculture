<style>
    thead {
        background-color: #212529 !important;
        color: white;
    }

    table td, label {
        color: #332c1f;
    }
    
</style>

<div class="container-fluid">

        <div class="d-sm-flex justify-content-between align-items-center mb-4">
                        <h3 class="text-dark mb-0">Pest and Disease > Frequency</h3><a class="btn btn-primary disabled btn-sm d-none d-sm-inline-block" role="button" style="background: rgba(78,115,223,0);color: #332c1f;border-color: rgba(51,44,31,0);">&nbsp;<br>&nbsp;<i class="far fa-clock" style="margin-right: 5px;"></i>October 1, 2021 10:32am<br><br></a>
                    </div>
    

    <div class="row">

        <div class="col-lg-12 col-xl-12 col-xxl-12">

            <div class="card shadow mb-4"  style="max-width: 1150px; margin: 0px auto;">

                <div class="card-header d-flex justify-content-between align-items-center" style="height:auto">

                    <ul class="nav nav-tabs card-header-tabs" id="nav-tab" role="tablist">
                        <li class="nav-item"><a id="all-tab" class="nav-link active" data-toggle="tab" href="#diagnoses"role="tab" aria-controls="diagnoses" aria-selected="true" 
                            style="background: #F0F0F0;">All</a></li>

                        <li class="nav-item"><a id="pests-tab" class="nav-link" data-toggle="tab" href="#pests"role="tab" aria-controls="pests" aria-selected="false" 
                            style="background: #F0F0F0;">Pests</a></li>

                        <li class="nav-item"><a id="diseases-tab" class="nav-link" data-toggle="tab" href="#diseases"role="tab" aria-controls="diseases" aria-selected="false" 
                            style="background: #F0F0F0;">Diseases</a></li>
                    </ul>
                        {{!-- <div class="dropdown no-arrow"><button class="btn btn-link btn-sm dropdown-toggle" aria-expanded="false" data-bs-toggle="dropdown" type="button"><i class="fas fa-ellipsis-v d-xxl-flex justify-content-xxl-end text-gray-400"></i></button>
                            <div class="dropdown-menu shadow dropdown-menu-end animated--fade-in">
                                <p class="text-center dropdown-header">dropdown header:</p><a class="dropdown-item" href="#">&nbsp;Action</a><a class="dropdown-item" href="#">&nbsp;Another action</a>
                                    <div class="dropdown-divider"></div><a class="dropdown-item" href="#">&nbsp;Something else here</a>
                            </div>
                        </div> --}}

                    </div>

                        <div class="card-body">
                                
                                {{!-- TAB CONTENT --}}
                                <select class="form-select form-select-sm" id="farm_selected" style="width : 30%;">
                                    <option value="all">all</option>
                                    {{#each farms}}
                                        <option value="{{this.farm_id}}">{{this.farm_name}}</option>
                                    {{/each}}   
                                </select>
                                <div class="tab-content" id="nav-tabContent">

                                    {{!-- TAB 1 --}}
                                    <div class="tab-pane fade show active" id="diagnoses" role="tabpanel" aria-labelledby="diagnoses-tab">
                                    
                                    {{!-- ADD DIAGNOSIS --}}
                                    <div role="tablist" id="accordion-diagnosis" style="margin-bottom: 20px;">
                                        
                                    </div>
                                    {{!-- END OF ADD DIAGNOSIS --}}
                                    
                                    {{!-- <small class="form-text" style="color: #584c33;font-weight: bold;font-size: 18px;">Filter Results:&nbsp;&nbsp;</small>
                                    <form class="d-none d-sm-inline-block me-auto ms-md-3 my-2 my-md-0 mw-100 navbar-search">
                                        <div class="input-group"><input id="filterDiagnosesTable" onkeyup="diagnosesFilter()" class="bg-light form-control border-0 small" type="text" placeholder="Search for ..." style="border-radius: 60px;border-color: #7D7D7D;border-left-style: solid;border-left-color: #7D7D7D;"></div>
                                    </form> --}}
                                    {{!-- <button class="btn btn-primary d-flex float-end" role="button" style=" margin-bottom: 20px; background: #EDD172;border-style: none;color: #332c1f;border-radius: 20px;" onclick='window.location="/pest_and_disease/diagnose_add_diagnosis"'>Add Diagnosis</button> --}}
                                    
                                    <div>
                                        <table class="table table-striped table-bordered tablesorter" id="diagnosesTable" style="width : 50%; margin-left: auto; margin-right: auto;">
                                            <thead class="thead-dark">
                                                <tr>
                                                    <th></th>
                                                    <th>Pest/Disease</th>
                                                    <th>Type</th>
                                                    <th>Total Occurrences</th>
                                                    <th>Common Stage</th>
                                                </tr>
                                            </thead>
                                            <tbody id="all_frequency">
                                                {{#each total}}
                                                    <tr>
                                                        <td><input class="frequency_radio" type="radio" id="" name="fav_language" value="{{this.pd_id}}|{{this.type}}" {{#if selected}}checked{{/if}}></td>
                                                        <td>{{this.pd_name}}</td>
                                                        <td>{{this.type}}</td>
                                                        <td>{{this.total}}</td>
                                                        <td>{{this.frequent_stage}}</td>
                                                    </tr>
                                                {{/each}}
                                            </tbody>
                                        </table>
                                    </div> 
                                    </div>
                                    {{!-- END OF TAB 1 --}}

                                    {{!-- TAB 2 --}}
                                    <div class="tab-pane fade" id="pests" role="tabpanel" aria-labelledby="pests-tab">
                                    
                                    <div role="tablist" id="accordion-diagnosis" style="margin-bottom: 20px;">
                                        
                                    </div>


                                    {{!-- <button class="btn btn-primary d-flex float-end" role="button" style="background: #EDD172;border-style: none;color: #332c1f;border-radius: 20px;" onclick='window.location="/pest_and_disease/diagnose_add_pest"'>Add Pest</button> --}}
                                        <div>
                                            <table class="table table-striped table-bordered tablesorter" id="diagnosesTable" style="width : 50%; margin-left: auto; margin-right: auto;">
                                            <thead class="thead-dark">
                                                <tr>
                                                    <th></th>
                                                    <th>Pest/Disease</th>
                                                    <th>Type</th>
                                                    <th>Total Occurrences</th>
                                                    <th>Common Stage</th>
                                                </tr>
                                            </thead>
                                            <tbody id="pest_frequency">
                                                {{#each pest}}
                                                    <tr>
                                                        <td><input class="frequency_radio" type="radio" id="" name="fav_language" value="{{this.pd_id}}|{{this.type}}" {{#if selected}}checked{{/if}}></td>
                                                        <td>{{this.pd_name}}</td>
                                                        <td>{{this.type}}</td>
                                                        <td>{{this.total}}</td>
                                                        <td>{{this.frequent_stage}}</td>
                                                    </tr>
                                                {{/each}}
                                            </tbody>
                                        </table>
                                        </div>  
                                    </div>
                                    {{!-- END OF TAB 2 --}}

                                    {{!-- TAB 3 --}}
                                    <div role="tablist" id="accordion-diagnosis" style="margin-bottom: 20px;">
                                        
                                    </div>
                                    <div class="tab-pane fade" id="diseases" role="tabpanel" aria-labelledby="diseases-tab">
                                    {{!-- <button class="btn btn-primary d-flex float-end" role="button" style="background: #EDD172;border-style: none;color: #332c1f;border-radius: 20px;" onclick='window.location="/pest_and_disease/diagnose_add_disease"'>Add Disease</button> --}}
                                        <div>
                                            <table class="table table-striped table-bordered tablesorter" id="diagnosesTable" style="width : 50%; margin-left: auto; margin-right: auto;">
                                            <thead class="thead-dark">
                                                <tr>
                                                    <th></th>
                                                    <th>Pest/Disease</th>
                                                    <th>Type</th>
                                                    <th>Total Occurrences</th>
                                                    <th>Common Stage</th>
                                                </tr>
                                            </thead>
                                            <tbody id="disease_frequency">
                                                {{#each disease}}
                                                    <tr>
                                                        <td><input class="frequency_radio" type="radio" id="" name="fav_language" value="{{this.pd_id}}|{{this.type}}" {{#if selected}}checked{{/if}}></td>
                                                        <td>{{this.pd_name}}</td>
                                                        <td>{{this.type}}</td>
                                                        <td>{{this.total}}</td>
                                                        <td>{{this.frequent_stage}}</td>
                                                    </tr>
                                                {{/each}}
                                            </tbody>
                                        </table>
                                        </div> 
                                    </div>
                                    
                                    {{!-- END OF TAB 3 --}}

                                </div>
                                {{!-- END OF TAB CONTENT --}}

                        </div>
                    </div>
                </div>
        </div>
        <div class="row">
            <div class="card shadow mb-4"  style="max-width: 1150px; margin: 0px auto;">
                <div class="card-body">
                    <a><span class="h3" id="pd_name">Pest/Disease Name</span> <span class="h6" id="pd_type" style="margin-left: 10px;">Type</span></a><br>
                    <span style="margin-left: 30px;" id="pd_desc">THis is the description THis is the description THis is the description THis is the description THis is the description</span>
                    <div class="tab-content" id="nav-tabContent">

                        {{!-- TAB 1 --}}
                        <div class="tab-pane fade show active" id="diagnoses" role="tabpanel" aria-labelledby="diagnoses-tab">
                        
                        {{!-- ADD DIAGNOSIS --}}
                        <div role="tablist" id="accordion-diagnosis" style="margin-bottom: 20px;">
                            
                        </div>
                            <div>
                                <table class="table table-striped table-bordered tablesorter" id="diagnosesTable">
                                    <thead class="thead-dark">
                                        <tr>
                                            <th>Date Diagnosed</th>
                                            <th>Date Solved</th>
                                            <th>Farm</th>
                                            <th>Crop Cycle</th>
                                            <th>Stage</th>
                                            <th></th>
                                        </tr>
                                    </thead>
                                    <tbody id="diagnoses_list_table">
                                        {{#each diagnoses}}
                                            <tr>
                                                <td>{{this.name}}</td>
                                                <td>{{this.type}}</td>
                                                <td>{{this.date_diagnosed}}</td>
                                                <td>{{this.farm_name}}</td>
                                                <td>
                                                    <div class="dropdown no-arrow" style="width : 50px;">
                                                        <button id="more" class="btn btn-primary btn-sm dropdown-toggle" aria-expanded="false" data-bs-toggle="dropdown" type="button">
                                                            <i class="fa fa-ellipsis-h d-lg-flex justify-content-lg-center"></i>
                                                        </button>
                                                        <div class="dropdown-menu notSidebar shadow dropdown-menu-end animated--fade-in">
                                                            <a class="dropdown-item notSidebar" href="/pest_and_disease/diagnose_details?id={{this.diagnosis_id}}" >&nbsp;View Details</a>
                                                        </div>
                                                    </div>
                                                </td>
                                            </tr>
                                        {{/each}}
                                    </tbody>
                                </table>
                            </div> 
                        </div>
                    </div>
                </div>
            </div>
        </div>
</div>

<script>

var view = "diagnosis_frequency";

function goBack() {
  window.history.back();
}

// TAB 1

var currentTab = 0; // Current tab is set to be the first tab (0)
showTab(currentTab); // Display the current tab

function showTab(n) {
  // This function will display the specified tab of the form...
  var x = document.getElementsByClassName("tab");
  x[n].style.display = "block";

  //... and run a function that will display the correct step indicator:
  fixStepIndicator(n)
}

function nextPrev(n) {
    var today = new Date();
    if(n == 1 && (document.getElementById("date_diagnosed").value > (today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate()) || !document.getElementById("date_diagnosed").value)){
    }
    else{
             // This function will figure out which tab to display
            var x = document.getElementsByClassName("tab");

            // Exit the function if any field in the current tab is invalid:
            if (!dataValidation(currentTab+2)) return false;
            // Hide the current tab:
            // x[currentTab].style.display = "none";

            document.getElementsByClassName("step")[currentTab].className += " finish";

            // Increase or decrease the current tab by 1:
            currentTab = currentTab + n;

            // if you have reached the end of the form...
            if (currentTab >= x.length) {
                // ... the form gets submitted:
                document.getElementById("create_farm_form").submit();
                return false;
            }
            // Otherwise, display the correct tab:
            showTab(currentTab);
    }
}


function fixStepIndicator(n) {
  // This function removes the "active" class of all steps...
  var i, x = document.getElementsByClassName("step");
  for (i = 0; i < x.length; i++) {
    x[i].className = x[i].className.replace(" active", "");
  }
  //... and adds the "active" class on the current step:
  x[n].className += " active";
}
// END OF TAB 1

// TAB 2
var currentTab2 = 0; // Current tab is set to be the first tab (0)
showTab2(currentTab2); // Display the current tab


function showTab2(n) {
  // This function will display the specified tab of the form...
  var x = document.getElementsByClassName("tab2");
  x[n].style.display = "block";

  //... and run a function that will display the correct step indicator:
  fixStepIndicator2(n)
}


function nextPrev2(n) {
  // This function will figure out which tab to display
  var x = document.getElementsByClassName("tab2");

  // Exit the function if any field in the current tab is invalid:
  if (!dataValidation(currentTab2+2)) return false;
  // Hide the current tab:
 // x[currentTab].style.display = "none";

document.getElementsByClassName("step2")[currentTab].className += " finish";

  // Increase or decrease the current tab by 1:
  currentTab2 = currentTab2 + n;

  // if you have reached the end of the form...
  if (currentTab2 >= x.length) {
    // ... the form gets submitted:
    document.getElementById("create_farm_form").submit();
    return false;
  }
  // Otherwise, display the correct tab:
  showTab2(currentTab2);
}


function fixStepIndicator2(n) {
  // This function removes the "active" class of all steps...
  var i, x = document.getElementsByClassName("step2");
  for (i = 0; i < x.length; i++) {
    x[i].className = x[i].className.replace(" active", "");
  }
  //... and adds the "active" class on the current step:
  x[n].className += " active";
}

// END OF TAB 2

// TAB 3
var currentTab3 = 0; // Current tab is set to be the first tab (0)
showTab3(currentTab3); // Display the current tab


function showTab3(n) {
  // This function will display the specified tab of the form...
  var x = document.getElementsByClassName("tab3");
  x[n].style.display = "block";

  //... and run a function that will display the correct step indicator:
  fixStepIndicator3(n)
}


function nextPrev3(n) {
  // This function will figure out which tab to display
  var x = document.getElementsByClassName("tab3");

  // Exit the function if any field in the current tab is invalid:
  if (!dataValidation(currentTab3+2)) return false;
  // Hide the current tab:
 // x[currentTab].style.display = "none";

document.getElementsByClassName("step3")[currentTab].className += " finish";

  // Increase or decrease the current tab by 1:
  currentTab3 = currentTab3 + n;

  // if you have reached the end of the form...
  if (currentTab3 >= x.length) {
    // ... the form gets submitted:
    document.getElementById("create_farm_form").submit();
    return false;
  }
  // Otherwise, display the correct tab:
  showTab3(currentTab3);
}


function fixStepIndicator3(n) {
  // This function removes the "active" class of all steps...
  var i, x = document.getElementsByClassName("step3");
  for (i = 0; i < x.length; i++) {
    x[i].className = x[i].className.replace(" active", "");
  }
  //... and adds the "active" class on the current step:
  x[n].className += " active";
}

// END OF TAB 3

</script>